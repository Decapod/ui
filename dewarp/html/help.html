<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="../../../../lib/infusion/framework/fss/css/fss-reset-global.css" />
        <link rel="stylesheet" type="text/css" href="../../core/styles/css/decapod.css" />
        <link rel="stylesheet" type="text/css" href="../../core/styles/css/help.css" />

        <title>Decapod Help - Dewarp</title>
    </head>

    <body>

        <section class="ds-shared-decapod ds-shared-help">

            <h1>Decapod Help - Dewarp</h1>

            <h2>What is Dewarp?</h2>
            <p>Dewarp is the process of taking a set of stereo images and its camera calibration data to produce a flattened version of the content.</p>

            <h3>Example Input Stereo 3D Pair:</h3>
            <p>
            <img class="help-image-example" src="../../core/help/images/dewarp-input-1.jpg" alt="An example input image to dewarp - an image of an open book as captured by the left camera of a stereo pair.">
            <img class="help-image-example" src="../../core/help/images/dewarp-input-2.jpg" alt="An example input image to dewarp - an image of an open book as captured by the right camera of a stereo pair.">
            </p>

            <h3>Example Dewarp Output:</h3>
            <p>
            <img class="help-image-example" src="../../core/help/images/dewarp-output-1.jpg" alt="An example dewarp output - the left page of the book is separated and dewarped.">
            <img class="help-image-example" src="../../core/help/images/dewarp-output-2.jpg" alt="An example dewarp output - the right page of the book is separated and dewarped.">
            </p>

            <h2>How to Dewarp Stero 3D Captures</h2>

            <ol>
                <li> Create a ZIP file containing the stereo images that are to be dewarped. If the stereo images were captured using Decapod’s Capture tool, the images should already be in a ZIP file called “<code>capture.zip</code>”.
                    <p class="note"><em>Note:</em><br />
                    Stereo 3D images should follow a required file naming pattern before being ZIP'ed. Refer to "Naming Stereo Images" below.
                    </p>
                </li>

                <li> Locate the ZIP file containing the stereo images that are to be dewarped.</li>
                <li> Locate calibration data generated by the Stereo 3D Calibration tool. The filename should be called "<code>calibration.zip</code>".</li>
                <li> Specify the page separator and background colour. See "Page Separator and Background Colour Picker".</li>
                <li> Select "Dewarp" to begin the dewarp process.</li>
                <li> When prompted, save the dewarped file to a safe location.</li>
            </ol>

            <h2>Naming Stereo Images</h2>
            <p>Decapod’s Dewarping tool expects the stereo images to be named in the following manner: <code>capture-[capture #]_[camera #].[extension]</code>

            <p>For example:</p>
                
            <ul>
                <li> <code>capture-01_0.jpg, capture-01_1.jpg, capture-02_0.jpg, capture-02_1.jpg ...</code></li>
                <li> <code>capture-01_0.png, capture-01_1.png,capture-02_0.png, capture-02_1.png ...</code></li>
                <li> Decapod supports dewarping of TIFF, PNG, and JPEG files.
            </ul>

            <p>For each [capture #] there will be two images - one from Camera 0 (i.e. left) and one from Camera 1 (i.e. right). The left image is always first, followed by the right image. If the images do not follow this format, then the Dewarp tool may not be able to process the images and may give undesired output.</p>

            <p> If images were captured using Decapod’s Capture tool, by default the images should already be named to follow this format.</p>

            <h2>Page Separator and Background Colour Picker</h2>
            <p>To properly split the left and right pages, and to remove the background, the user must specify the background and page separator colour using the colour picker. The colour picker is launched by selecting the "Pick Colour" button.</p>

            <ol>
                <li> When the Pick Colour window loads, there will be an image shown.</li>
                <li> The first mouse click will choose the page separator colour. Do this by positioning the mouse pointer over the separator and click once.</li>
                <li> The second mouse click will choose the background colour. Do this by clicking the dominant background colour.</li>
                <li> The Pick Colour window will then close.</li>
                <li> Dewarp can begin by selecting the Dewarp button.</li>
            </ol>

            <h2>How Long Does Dewarp Take?</h2>
            <p>The dewarping process can take a long time. On a modern Intel i7 8-core system with 16GB of RAM, dewarping can take anywhere from 25 minutes to 1 hour per page spread.</p>

            <h2>What if Dewarp Fails?</h2>
            <p>It is possible that dewarping process fails and no useful output is delivered at the end. Some possible solutions to try:</p>
            <ul>
            <li> Is the environment well lit? The content and the background should be evenly lit with little glare or hard shadows.</li>
            <li> Try choosing the colour separator and background colour again using the Colour Picker.</li>
            <li> Is there sufficient disk space?</li>
            </ul>

        </section>
    </body>
</html>
